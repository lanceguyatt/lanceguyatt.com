---
import { type HTMLAttributes } from 'astro/types'
import { cva, type VariantProps } from 'class-variance-authority'

import Depth from '$components/Depth.astro'

const titlebar = cva('h-titlebar flex items-center', {
  variants: {
    intent: {
      default: 'bg-foreground text-secondary',
      primary: 'bg-primary text-primary-foreground',
      secondary: 'bg-background text-foreground'
    }
  },
  defaultVariants: { intent: 'default' }
})

export type TitleProps = HTMLAttributes<'div'> &
  VariantProps<typeof titlebar> & {
    depth?: boolean
  }

const {
  class: className,
  depth = false,
  intent,
  ...props
} = Astro.props as TitleProps
---

<div
  data-compoment="title-bar"
  class={titlebar({ intent, className })}
  {...props}
>
  <slot name="prefix" />
  <div
    class="text-base/tighter flex-auto overflow-hidden text-ellipsis whitespace-nowrap px-1"
  >
    <slot />
  </div>
  <slot name="suffix">
    {depth && <Depth class="bg-background" />}
  </slot>
</div>
