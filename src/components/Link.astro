---
import type { HTMLAttributes } from 'astro/types'
import { cva, type VariantProps } from 'class-variance-authority'

import Icon from '~components/Icon.astro'

const link = cva(
  'flex flex-col items-center text-base/tight no-underline outline-none',
  {
    variants: {
      active: {
        true: 'bg-destructive',
        false: 'focus:bg-white focus:text-primary'
      }
    },
    compoundVariants: [
      {
        active: false
      }
    ]
  }
)

enum Icons {
  drive,
  drawer,
  file,
  disk
}

export interface Props extends HTMLAttributes<'a'>, VariantProps<typeof link> {
  className?: string
  external?: boolean
  href: string
  icon: Icons
}

const {
  active,
  className,
  external = false,
  href,
  icon = Icons.disk
} = Astro.props
---

<a
  href={href}
  class={link({ active, className })}
  target={external ? '_blank' : null}
  rel={external ? 'noopener noreferrer' : null}
>
  <Icon name={icon} class="mb-1" />
  <span class="block max-w-24 text-center">
    <slot />
  </span>
</a>
