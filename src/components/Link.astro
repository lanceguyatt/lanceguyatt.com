---
import type { HTMLAttributes } from 'astro/types'
import { cva, type VariantProps } from 'class-variance-authority'
import { Icon } from 'astro-icon/components'

const linkVariants = cva(
  [
    'flex',
    'flex-col',
    'items-center',
    'text-base/tighter',
    'no-underline',
    'outline-none'
  ],
  {
    variants: {
      active: {
        // true: 'bg-primary',
        false: ['focus:bg-background', 'focus:text-primary']
      }
    },
    defaultVariants: {
      active: false
    }
  }
)

type LinkProps = HTMLAttributes<'a'> &
  VariantProps<typeof linkVariants> & {
    external?: boolean
    icon?: any
    active?: any
  }

const {
  active,
  class: className,
  external = false,
  href,
  icon = 'disk'
} = Astro.props
---

<a
  {href}
  class={linkVariants({ active, className })}
  target={external ? '_blank' : null}
  rel={external ? 'noopener noreferrer' : null}
>
  {!active && <Icon name={icon} class="mb-2" />}
  {active && <Icon name={`${icon}-active`} class="mb-2" />}
  <div class="max-w-24 text-center">
    <slot />
  </div>
</a>
